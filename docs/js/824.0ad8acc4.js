"use strict";(self["webpackChunkcffinit"]=self["webpackChunkcffinit"]||[]).push([[824],{9520:(e,i,n)=>{n.r(i),n.d(i,{default:()=>N});var r=n(3673),t=n(2323);const o=(0,r.HX)("data-v-06ec88ad");(0,r.dD)("data-v-06ec88ad");const d={id:"metroline"},a={id:"form"},l=(0,r.Wm)("div",{id:"form-title"},[(0,r.Wm)("h1",{class:"page-title"}," Identifiers ")],-1),s={id:"form-content"},u=(0,r.Wm)("p",{class:"question"},[(0,r.Uk)(" What persistent identifiers are available for the work? See "),(0,r.Wm)("a",{href:"https://github.com/citation-file-format/citation-file-format/blob/main/schema-guide.md#definitionsidentifier",target:"_blank"}," schema guide "),(0,r.Uk)(" for examples. ")],-1),c={class:"scroll-to-bottom-container"},m=(0,r.Wm)("span",{class:"bottom"},null,-1),v=(0,r.Uk)(" Add identifier "),p={id:"form-button-bar"};(0,r.Cn)();const f=o(((e,i,n,f,g,b)=>{const w=(0,r.up)("Stepper"),y=(0,r.up)("IdentifierCardViewing"),I=(0,r.up)("IdentifierCardEditing"),W=(0,r.up)("q-btn"),h=(0,r.up)("q-banner"),E=(0,r.up)("StepperActions");return(0,r.wg)(),(0,r.j4)(r.HY,null,[(0,r.Wm)("div",d,[(0,r.Wm)(w)]),(0,r.Wm)("div",a,[l,(0,r.Wm)("div",s,[u,(0,r.Wm)("div",c,[m,(0,r.Wm)("div",null,[((0,r.wg)(!0),(0,r.j4)(r.HY,null,(0,r.Ko)(e.identifiers,((n,t)=>((0,r.wg)(),(0,r.j4)("div",{class:"q-mb-md q-mr-lg",key:t},[e.editingId!==t?((0,r.wg)(),(0,r.j4)(y,{key:0,index:t,identifier:n,"num-identifiers":e.identifiers.length,onEditPressed:()=>e.editingId=t,onMoveDown:i=>e.moveIdentifierDown(t),onMoveUp:i=>e.moveIdentifierUp(t)},null,8,["index","identifier","num-identifiers","onEditPressed","onMoveDown","onMoveUp"])):((0,r.wg)(),(0,r.j4)(I,(0,r.dG)({key:1,index:t},n,{"num-identifiers":e.identifiers.length,onUpdateType:e.setIdentifierTypeField,onUpdateValue:e.setIdentifierValueField,onUpdateDescription:e.setIdentifierDescriptionField,onClosePressed:i[1]||(i[1]=()=>e.editingId=-1),onRemovePressed:e.removeIdentifier,onMoveDown:i=>e.moveIdentifierDown(t),onMoveUp:i=>e.moveIdentifierUp(t)}),null,16,["index","num-identifiers","onUpdateType","onUpdateValue","onUpdateDescription","onRemovePressed","onMoveDown","onMoveUp"]))])))),128))])]),(0,r.Wm)(W,{class:"q-mt-md q-mb-md",color:"primary","no-caps":"",onClick:e.addIdentifier},{default:o((()=>[v])),_:1},8,["onClick"]),e.identifiersErrors.hasError?((0,r.wg)(),(0,r.j4)(h,{key:0,class:"bg-warning text-negative"},{default:o((()=>[((0,r.wg)(!0),(0,r.j4)(r.HY,null,(0,r.Ko)(e.identifiersErrors.messages,((e,i)=>((0,r.wg)(),(0,r.j4)("div",{key:i},(0,t.zw)(e),1)))),128))])),_:1})):(0,r.kq)("",!0)]),(0,r.Wm)("div",p,[(0,r.Wm)(E)])])],64)}));var g=n(1959),b=n(525),w=n(5132);n(246);const y={class:"row items-center no-wrap"},I={class:"q-gutter-md items-center no-wrap"},W={class:"q-gutter-md items-center no-wrap"};function h(e,i,n,t,o,d){const a=(0,r.up)("q-option-group"),l=(0,r.up)("q-input"),s=(0,r.up)("q-card-section"),u=(0,r.up)("q-btn"),c=(0,r.up)("q-card-actions"),m=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(m,{flat:"",bordered:"",class:["bg-formcard","q-pa-md",e.identifierErrors.hasError?"red-border":""]},{default:(0,r.w5)((()=>[(0,r.Wm)(s,null,{default:(0,r.w5)((()=>[(0,r.Wm)("div",y,[(0,r.Wm)(a,{inline:"",type:"radio",error:e.typeError.hasError,"error-message":e.typeError.messages.join(", "),"model-value":e.type,options:e.typeOptions,"onUpdate:modelValue":i[1]||(i[1]=i=>e.$emit("updateType","type",i))},null,8,["error","error-message","model-value","options"])]),(0,r.Wm)("div",I,[(0,r.Wm)(l,{"bg-color":"white",label:"Value",outlined:"",standout:"",dense:"",error:e.valueError.hasError,"error-message":e.valueError.messages.join(", "),"model-value":e.value,"onUpdate:modelValue":i[2]||(i[2]=i=>e.$emit("updateValue","value",i))},null,8,["error","error-message","model-value"])]),(0,r.Wm)("div",W,[(0,r.Wm)(l,{"bg-color":"white",label:"Description",outlined:"",standout:"",dense:"",error:e.descriptionError.hasError,"error-message":e.descriptionError.messages.join(", "),"model-value":e.description,"onUpdate:modelValue":i[3]||(i[3]=i=>e.$emit("updateDescription","description",i))},null,8,["error","error-message","model-value"])])])),_:1}),(0,r.Wm)(c,{align:"right"},{default:(0,r.w5)((()=>[(0,r.Wm)(u,{dense:"",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[4]||(i[4]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,r.Wm)(u,{dense:"",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[5]||(i[5]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,r.Wm)(u,{color:"negative",dense:"",icon:"delete",label:"Remove",onClick:i[6]||(i[6]=i=>e.$emit("removePressed"))}),(0,r.Wm)(u,{dense:"",icon:"done",label:"Done",onClick:i[7]||(i[7]=i=>e.$emit("closePressed"))})])),_:1})])),_:1},8,["class"])}var E=n(3281),x=n(9090);const k=(0,r.aZ)({name:"IdentifierCardEditing",props:{index:{type:Number,required:!0},type:{type:String,default:""},value:{type:String,default:""},description:{type:String,default:""},numIdentifiers:{type:Number,default:0}},setup(e){return{typeOptions:[{label:"DOI",value:"doi"},{label:"URL",value:"url"},{label:"Software Heritage",value:"swh"},{label:"Other",value:"other"}],typeError:(0,r.Fl)((()=>(0,E.I)(`/identifiers/${e.index}/type`))),valueError:(0,r.Fl)((()=>(0,E.I)(`/identifiers/${e.index}/value`))),descriptionError:(0,r.Fl)((()=>(0,E.I)(`/identifiers/${e.index}/description`))),identifierErrors:(0,r.Fl)((()=>(0,x.H)(e.index)))}},emits:["closePressed","removePressed","updateType","updateValue","updateDescription","moveUp","moveDown"]});var C=n(151),U=n(5589),q=n(4140),D=n(4842),j=n(9367),Z=n(2165),V=n(7518),$=n.n(V);k.render=h;const F=k;$()(k,"components",{QCard:C.Z,QCardSection:U.Z,QOptionGroup:q.Z,QInput:D.Z,QCardActions:j.Z,QBtn:Z.Z});const P=(0,r.HX)("data-v-797e86d0");(0,r.dD)("data-v-797e86d0");const S={style:{"flex-grow":"1.0"}};(0,r.Cn)();const _=P(((e,i,n,o,d,a)=>{const l=(0,r.up)("q-btn"),s=(0,r.up)("q-card");return(0,r.wg)(),(0,r.j4)(s,{bordered:"",class:["bg-formcard",e.identifierErrors.hasError?"red-border":""],flat:"",style:{display:"flex","flex-direction":"row"}},{default:P((()=>[(0,r.Wm)("div",S,[(0,r.Wm)("ul",null,[(0,r.Wm)("li",null,(0,t.zw)(e.identifier.description),1),(0,r.Wm)("li",null,(0,t.zw)(e.identifier.type)+": "+(0,t.zw)(e.identifier.value),1)])]),(0,r.Wm)("div",null,[(0,r.Wm)(l,{class:"identifier-button",color:"blue",disable:0==e.index,icon:"ion-arrow-up",tabindex:"-1",onClick:i[1]||(i[1]=i=>e.$emit("moveUp"))},null,8,["disable"]),(0,r.Wm)(l,{class:"identifier-button",color:"blue",disable:e.index>=e.numIdentifiers-1,icon:"ion-arrow-down",tabindex:"-1",onClick:i[2]||(i[2]=i=>e.$emit("moveDown"))},null,8,["disable"]),(0,r.Wm)(l,{class:"identifier-button",color:"primary",flat:"","hover-color":"negative",icon:"edit",title:"Edit",onClick:i[3]||(i[3]=i=>e.$emit("editPressed"))})])])),_:1},8,["class"])})),O=(0,r.aZ)({name:"IdentifierCardViewing",props:{index:{type:Number,required:!0},identifier:{type:Object,required:!0},numIdentifiers:{type:Number,default:0}},setup(e){return{identifierErrors:(0,r.Fl)((()=>(0,x.H)(e.index)))}},emits:["editPressed","moveDown","moveUp"]});O.render=_,O.__scopeId="data-v-797e86d0";const Q=O;$()(O,"components",{QCard:C.Z,QBtn:Z.Z});var H=n(1364),M=n(4009),A=n(2064),T=n(8624),Y=function(e,i,n,r){function t(e){return e instanceof n?e:new n((function(i){i(e)}))}return new(n||(n=Promise))((function(n,o){function d(e){try{l(r.next(e))}catch(i){o(i)}}function a(e){try{l(r["throw"](e))}catch(i){o(i)}}function l(e){e.done?n(e.value):t(e.value).then(d,a)}l((r=r.apply(e,i||[])).next())}))};const z=(0,r.aZ)({name:"ScreenIdentifiers",components:{Stepper:b.Z,StepperActions:w.Z,IdentifierCardEditing:F,IdentifierCardViewing:Q},setup(){const{identifiers:e,setIdentifiers:i}=(0,H.Y)(),n=(0,g.iH)(-1),t=()=>Y(this,void 0,void 0,(function*(){let t;const o={type:"doi",value:"",description:void 0};t=void 0===e.value?[o]:[...e.value,o],i(t),n.value=t.length-1,yield(0,r.Y3)(),(0,M.O)()})),o=()=>{if(void 0!==e.value){const r=[...e.value];r.splice(n.value,1),i(r),n.value=-1,Array.isArray(r)&&0===r.length&&i(void 0)}},d=(r,t)=>{if(void 0!==e.value){const r=Object.assign({},e.value[n.value]);r.description=""===t?void 0:t,e.value[n.value]=r,i(e.value)}},a=(r,t)=>{if(void 0!==e.value){const r=Object.assign({},e.value[n.value]);r.type=t,e.value[n.value]=r,i(e.value)}},l=(r,t)=>{if(void 0!==e.value){const r=Object.assign({},e.value[n.value]);r.value=t,e.value[n.value]=r,i(e.value)}},s=r=>{void 0!==e.value&&((0,A.A)(r,e.value,i),n.value===r&&r>0?n.value=n.value-1:n.value===r-1&&(n.value=n.value+1))},u=r=>{void 0!==e.value&&((0,A.v)(r,e.value,i),n.value===r&&r<e.value.length-1?n.value=n.value+1:n.value===r+1&&(n.value=n.value-1))};return{addIdentifier:t,editingId:n,identifiers:e,moveIdentifierUp:s,moveIdentifierDown:u,removeIdentifier:o,setIdentifierDescriptionField:d,setIdentifierTypeField:a,setIdentifierValueField:l,identifiersErrors:(0,r.Fl)((()=>(0,T.a)(e.value)))}}});var B=n(5607);z.render=f,z.__scopeId="data-v-06ec88ad";const N=z;$()(z,"components",{QBtn:Z.Z,QBanner:B.Z})}}]);